@using static System.Linq.Enumerable
@inject GamePlayer game

@code {
  public Dictionary<int, string> Colors = new Dictionary<int, string>() {
{0, "50"},
{1, "50"},
{2, "50"},
{3, "100"},
{4, "100"},
{5, "100"},
{6, "200"},
{7, "200"},
{8, "200"},
{9, "300"},
{10, "300"},
{11, "300"},
{12, "400"},
{13, "400"},
{14, "400"},
{15, "500"},
{16, "500"},
{17, "500"},
{18, "600"},
{19, "600"},
{20, "600"},
{21, "700"},
{22, "700"},
{23, "700"},
{24, "800"},
{25, "800"},
{26, "800"},
{27, "900"},
{28, "900"},
{29, "900"},
{30, "900"},
{31, "900"},
{32, "900"},
{33, "900"},
{34, "900"},
{35, "900"},
{36, "900"},
{37, "900"},
{38, "900"},
};
  public string calculateCellClass(int row, int col)
  {
    var closeToRover = Math.Abs(row - game.CurrentLocation.Item1) < 2 && Math.Abs(col - game.CurrentLocation.Item2) < 2;


    var location = (row, col);

    if (game.Map.OptimizedGrid != null && !game.Map.OptimizedGrid.ContainsKey(location))
      return "cell bg-black";

    if (location == game.Target)
      return "cell bg-black";
    else if (closeToRover)
      return "cell bg-lime-600";
    else if (!Colors.ContainsKey(game.Map.Grid[location] / 10))
      return "cell bg-rose-900";
    else
      return "cell bg-rose-" + Colors[game.Map.Grid[location] / 10];

  }
  public void Refresh()
  {
    this.StateHasChanged();
  }
}
<style>
  .cell {
    height: 1px;
    width: 1px;
    display: inline-block;
    margin: 0;
    padding: 0;
  }

  .my-row {
    height: 1px;
    margin: 0;
    padding: 0;
  }
</style>

<div>
  <button class="@(Styles.Btn)" onclick="@Refresh">Refresh Grid</button>

  @if (game.Map != null)
  {
    <div class="px-auto">
      @foreach (var row in Range(0, game.Map.TopRight.Item1 + 1))
      {
        <div class="my-row">
          @foreach (var col in Range(0, game.Map.TopRight.Item2 + 1))
          {
            string myClass = calculateCellClass(row, col);


            <div class=@(myClass)>
            </div>
          }
        </div>
      }
    </div>
  }
</div>